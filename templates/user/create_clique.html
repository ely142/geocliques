{% extends "user/userbase.html" %}
{% block content %}
<div style="height: 100vh; overflow-y: scroll;">
  <div class="container mt-4" style="color: #2c2c2c;">
    <br><br><br>
    <h3>ðŸ”— Create Your Own Clique</h3>
    <br>
    <form method="POST" action="{{ url_for('create_clique') }}">
      <div class="form-group">
        <label for="name" class="form-label" style="color: #2c2c2c;">Clique Name</label>
        <textarea class="form-control" id="name" name="name" rows="1" placeholder="Enter name" required></textarea>
      </div>
      <div class="form-group">
        <label for="visibility" class="form-label" style="color: #2c2c2c;">Choose an option:</label>
        <select id="visibility" name="visibility" required>
          <option value="Private">Private</option>
          <option value="Protected">Protected</option>
          <option value="Public">Public</option>
        </select>
      </div>
      <div class="form-group">
        <label for="description" class="form-label" style="color: #2c2c2c;">Description (optional)</label>
        <textarea class="form-control" id="description" name="description" rows="3" placeholder="Describe the clique" maxlength="100"></textarea>
        <div id="charCount" style="color: grey; font-size: 0.9em;">100 characters remaining</div>
      </div>
      <div class="form-group">
        <label class="form-label" style="color: #2c2c2c;">
          Choose an Icon
          <i id="selectedIconLabel" class="bi bi-star-fill" style="font-size: 24px;"></i>
        </label>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" id="tab-urban-icons" data-toggle="tab" href="#urban-icons" role="tab" aria-controls="urban-icons" aria-selected="true">Urban</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-transportation-icons" data-toggle="tab" href="#transportation-icons" role="tab" aria-controls="transportation-icons" aria-selected="false">Transportation</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-shopping-icons" data-toggle="tab" href="#shopping-icons" role="tab" aria-controls="shopping-icons" aria-selected="false">Shopping</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-nature-icons" data-toggle="tab" href="#nature-icons" role="tab" aria-controls="nature-icons" aria-selected="false">Nature</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-object-icons" data-toggle="tab" href="#object-icons" role="tab" aria-controls="object-icons" aria-selected="false">Objects</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-food-icons" data-toggle="tab" href="#food-icons" role="tab" aria-controls="food-icons" aria-selected="false">Food</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-signs-icons" data-toggle="tab" href="#signs-icons" role="tab" aria-controls="signs-icons" aria-selected="false">Signs</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="tab-people-icons" data-toggle="tab" href="#people-icons" role="tab" aria-controls="people-icons" aria-selected="false">People</a>
          </li>
        </ul>

        <div class="tab-content form-group" id="myTabContent">
          <div class="tab-pane fade show active" id="urban-icons" role="tabpanel" aria-labelledby="tab-urban-icons">
            <div class="icon-grid">
              <i class="bi bi-house" data-icon="bi-house"></i>
              <i class="bi bi-house-door-fill" data-icon="bi-house-door-fill"></i>
              <i class="bi bi-house-fill" data-icon="bi-house-fill"></i>
              <i class="bi bi-building" data-icon="bi-building"></i>
              <i class="bi bi-building-fill" data-icon="bi-building-fill"></i>
              <i class="bi bi-buildings" data-icon="bi-buildings"></i>
              <i class="bi bi-buildings-fill" data-icon="bi-buildings-fill"></i>
              <i class="bi bi-hospital" data-icon="bi-hospital"></i>
              <i class="bi bi-hospital-fill" data-icon="bi-hospital-fill"></i>
              <i class="bi bi-bank" data-icon="bi-bank"></i>
              <i class="bi bi-bank2" data-icon="bi-bank2"></i>
              <i class="bi bi-shop-window" data-icon="bi-shop-window"></i>
              <i class="bi bi-shop" data-icon="bi-shop"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="transportation-icons" role="tabpanel" aria-labelledby="tab-transportation-icons">
            <div class="icon-grid">
              <i class="bi bi-bus-front" data-icon="bi-bus-front"></i>
              <i class="bi bi-bus-front-fill" data-icon="bi-bus-front-fill"></i>
              <i class="bi bi-car-front" data-icon="bi-car-front"></i>
              <i class="bi bi-car-front-fill" data-icon="bi-car-front-fill"></i>
              <i class="bi bi-airplane-fill" data-icon="bi-airplane-fill"></i>
              <i class="bi bi-airplane-engines-fill" data-icon="bi-airplane-engines-fill"></i>
              <i class="bi bi-airplane-engines" data-icon="bi-airplane-engines"></i>
              <i class="bi bi-airplane" data-icon="bi-airplane"></i>
              <i class="bi bi-scooter" data-icon="bi-scooter"></i>
              <i class="bi bi-bicycle" data-icon="bi-bicycle"></i>
              <i class="bi bi-taxi-front" data-icon="bi-taxi-fronts"></i>
              <i class="bi bi-train-front" data-icon="bi-train-front"></i>
              <i class="bi bi-train-front-fill" data-icon="bi-train-front-fill"></i>
              <i class="bi bi-truck" data-icon="bi-truck"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="shopping-icons" role="tabpanel" aria-labelledby="tab-shopping-icons">
            <div class="icon-grid">
              <i class="bi bi-bag-fill" data-icon="bi-bag-fill"></i>
              <i class="bi bi-cart" data-icon="bi-cart"></i>
              <i class="bi bi-cart-fill" data-icon="bi-cart-fill"></i>
              <i class="bi bi-currency-dollar" data-icon="bi-currency-dollar"></i>
              <i class="bi bi-cash-coin" data-icon="bi-currency-dollar"></i>
              <i class="bi bi-bag" data-icon="bi-bag"></i>
              <i class="bi bi-bag-check" data-icon="bi-bag-check"></i>
              <i class="bi bi-bag-check-fill" data-icon="bi-bag-check-fill"></i>
              <i class="bi bi-bag-heart" data-icon="bi-bag-heart"></i>
              <i class="bi bi-bag-heart-fill" data-icon="bi-bag-heart-fill"></i>
              <i class="bi bi-bag-plus-fill" data-icon="bi-bag-plus-fill"></i>
              <i class="bi bi-handbag" data-icon="bi-handbag"></i>
              <i class="bi bi-handbag-fill" data-icon="bi-handbag-fill"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="nature-icons" role="tabpanel" aria-labelledby="tab-nature-icons">
            <div class="icon-grid">
              <i class="bi bi-tree-fill" data-icon="bi-tree-fill"></i>
              <i class="bi bi-luggage-fill" data-icon="bi-luggage-fill"></i>
              <i class="bi bi-cloud-fill" data-icon="bi-cloud-fill"></i>
              <i class="bi bi-cloud-drizzle-fill" data-icon="bi-cloud-drizzle-fill"></i>
              <i class="bi bi-cloud-sun-fill" data-icon="bi-cloud-sun-fill"></i>
              <i class="bi bi-cloud-lightning-rain-fill" data-icon="bi-cloud-lightning-rain-fill"></i>
              <i class="bi bi-cloud-snow-fill" data-icon="bi-cloud-snow-fill"></i>
              <i class="bi bi-cloud-lightning-fill" data-icon="bi-cloud-lightning-fill"></i>
              <i class="bi bi-cloud-moon-fill" data-icon="bi-cloud-moon-fill"></i>
              <i class="bi bi-moon-fill" data-icon="bi-moon-fill"></i>
              <i class="bi bi-moon" data-icon="bi-moon"></i>
              <i class="bi bi-moon-stars" data-icon="bi-moon-stars"></i>
              <i class="bi bi-moon-stars-fill" data-icon="bi-moon-stars-fill"></i>
              <i class="bi bi-snow" data-icon="bi-snow"></i>
              <i class="bi bi-snow2" data-icon="bi-snow2"></i>
              <i class="bi bi-sun-fill" data-icon="bi-sun-fill"></i>
              <i class="bi bi-sun" data-icon="bi-sun"></i>
              <i class="bi bi-bug" data-icon="bi-bug"></i>
              <i class="bi bi-bug-fill" data-icon="bi-bug-fill"></i>
              <i class="bi bi-card-image" data-icon="bi-card-image"></i>
              <i class="bi bi-image-alt" data-icon="bi-image-alt"></i>
              <i class="bi bi-twitter" data-icon="bi-twitter"></i>
              <i class="bi bi-feather" data-icon="bi-feather"></i>
              <i class="bi bi-fire" data-icon="bi-fire"></i>
              <i class="bi bi-flower1" data-icon="bi-flower1"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="object-icons" role="tabpanel" aria-labelledby="tab-object-icons">
            <div class="icon-grid">
              <i class="bi bi-book-fill" data-icon="bi-book-fill"></i>
              <i class="bi bi-laptop" data-icon="bi-laptop"></i>
              <i class="bi bi-gift" data-icon="bi-gift"></i>
              <i class="bi bi-balloon-fill" data-icon="bi-balloon-fill"></i>
              <i class="bi bi-balloon" data-icon="bi-balloon"></i>
              <i class="bi bi-balloon-heart-fill" data-icon="bi-balloon-heart-fill"></i>
              <i class="bi bi-balloon-heart" data-icon="bi-balloon-heart"></i>
              <i class="bi bi-palette" data-icon="bi-palette"></i>
              <i class="bi bi-brush-fill" data-icon="bi-brush-fill"></i>
              <i class="bi bi-pencil-fill" data-icon="bi-pencil-fill"></i>
              <i class="bi bi-controller" data-icon="bi-controller"></i>
              <i class="bi bi-headphones" data-icon="bi-headphones"></i>
              <i class="bi bi-camera-fill" data-icon="bi-camera-fill"></i>
              <i class="bi bi-camera-reels-fill" data-icon="bi-camera-reels-fill"></i>
              <i class="bi bi-alarm-fill" data-icon="bi-alarm-fill"></i>
              <i class="bi bi-award" data-icon="bi-award"></i>
              <i class="bi bi-bandaid" data-icon="bi-bandaid"></i>
              <i class="bi bi-bandaid-fill" data-icon="bi-bandaid-fill"></i>
              <i class="bi bi-hammer" data-icon="bi-hammer"></i>
              <i class="bi bi-wrench-adjustable" data-icon="bi-wrench-adjustable"></i>
              <i class="bi bi-cone-striped" data-icon="bi-cone-striped"></i>
              <i class="bi bi-cookie" data-icon="bi-cookie"></i>
              <i class="bi bi-dribbble" data-icon="bi-dribbble"></i>
              <i class="bi bi-life-preserver" data-icon="bi-life-preserver"></i>
              <i class="bi bi-dice-6" data-icon="bi-dice-6"></i>
              <i class="bi bi-sunglasses" data-icon="bi-sunglasses"></i>
              <i class="bi bi-backpack" data-icon="bi-backpack"></i>
              <i class="bi bi-ticket-perforated" data-icon="bi-ticket-perforated"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="food-icons" role="tabpanel" aria-labelledby="tab-food-icons">
            <div class="icon-grid">
              <i class="bi bi-cup-fill" data-icon="bi-cup-fill"></i>
              <i class="bi bi-cup-hot-fill" data-icon="bi-cup-hot-fill"></i>
              <i class="bi bi-cup-straw" data-icon="bi-cup-straw"></i>
              <i class="bi bi-cake" data-icon="bi-cake"></i>
              <i class="bi bi-cake2-fill" data-icon="bi-cake2-fill"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="signs-icons" role="tabpanel" aria-labelledby="tab-signs-icons">
            <div class="icon-grid">
              <i class="bi bi-gender-ambiguous" data-icon="bi-gender-ambiguous"></i>
              <i class="bi bi-gender-female" data-icon="bi-gender-female"></i>
              <i class="bi bi-gender-male" data-icon="bi-gender-male"></i>
              <i class="bi bi-exclamation-circle-fill" data-icon="bi-exclamation-circle-fill"></i>
              <i class="bi bi-ban icon-item" data-icon="bi-ban"></i>
              <i class="bi bi-ban-fill" data-icon="bi-ban-fill"></i>
              <i class="bi bi-heart-fill icon-item" data-icon="bi bi-heart-fill"></i>
              <i class="bi bi-heartbreak-fill icon-item" data-icon="bi-heartbreak-fill"></i>
              <i class="bi bi-chat-square-heart-fill" data-icon="bi-chat-square-heart-fill"></i>
              <i class="bi bi-star-fill icon-item" data-icon="bi-star-fill"></i>
              <i class="bi bi-activity" data-icon="bi-activity"></i>
              <i class="bi bi-asterisk" data-icon="bi-asterisk"></i>
              <i class="bi bi-arrow-through-heart" data-icon="bi-arrow-through-heart"></i>
              <i class="bi bi-arrow-through-heart-fill" data-icon="bi-arrow-through-heart-fill"></i>
              <i class="bi bi-music-note" data-icon="bi-music-note"></i>
              <i class="bi bi-music-note-beamed" data-icon="bi-music-note-beamed"></i>
              <i class="bi bi-hand-thumbs-down-fill" data-icon="bi-hand-thumbs-down-fill"></i>
              <i class="bi bi-hand-thumbs-up-fill" data-icon="bi-hand-thumbs-up-fill"></i>
              <i class="bi bi-lightning-fill" data-icon="bi-lightning-fill"></i>
              <i class="bi bi-yin-yang" data-icon="bi-yin-yang"></i>
            </div>
          </div>

          <div class="tab-pane fade" id="people-icons" role="tabpanel" aria-labelledby="tab-people-icons">
            <div class="icon-grid">
              <i class="bi bi-person-heart icon-item" data-icon="bi-person-heart"></i>
              <i class="bi bi-person-slash icon-item" data-icon="bi-person-slash"></i>
              <i class="bi bi-people" data-icon="bi-people"></i>
              <i class="bi bi-people-fill" data-icon="bi-people-fill"></i>
              <i class="bi bi-person-arms-up" data-icon="bi bi-person-arms-up"></i>
              <i class="bi bi-person-raised-hand" data-icon="bi-person-raised-hand"></i>
              <i class="bi bi-person-wheelchair" data-icon="bi-person-wheelchair"></i>
            </div>
          </div>

        </div>
      </div>

      <!-- hidden input to store the selected icon -->
      <input type="hidden" id="selectedIconInput" name="selectedIcon">

      <button type="submit" class="btn btn-secondary" style="background-color: #6c5ce7;">Save</button>
      <a href="{{ url_for('maptest') }}" class="btn btn-secondary">Discard</a>
    </form>
  </div>
  <div style="height: 100px;"></div>
</div>
{% endblock %}
{% block scripts %}
<script>
  // handle icon selection
  const iconElements = document.querySelectorAll('.icon-grid i');
  const selectedIconDisplay = document.getElementById('selectedIconLabel');
  const selectedIcon = document.getElementById('selectedIconInput');

  // default icon if no selection is made
  const DEFAULT_ICON = 'bi-star-fill';

  iconElements.forEach(icon => {
    icon.addEventListener('click', function() {
      const iconClass = this.getAttribute('data-icon');
      selectedIconDisplay.className = 'bi ' + iconClass; // update the icon next to the label
      selectedIcon.value = iconClass; // update the hidden input with the icon class
    });
  });

  // check for selected icon when the form is submitted, and set the default one if none is selected
  document.querySelector('form').addEventListener('submit', function() {
    if (!selectedIcon.value) {
      selectedIcon.value = DEFAULT_ICON;
      selectedIconDisplay.className = 'bi ' + DEFAULT_ICON;
    }
  });
</script>

<script>
  const descriptionInput = document.getElementById('description');
  const charCountDisplay = document.getElementById('charCount');

  descriptionInput.addEventListener('input', function () {
    const remaining = 100 - descriptionInput.value.length;
    charCountDisplay.textContent = `${remaining} characters remaining`;
  });
</script>

{% endblock %}
